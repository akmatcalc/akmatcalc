import{f as b,M as v,j as A,a as C,F as E,l as x,y as w,S as D}from"./vendor.975bee36.js";function y(e){const t=v(e);return`${t.slice(0,1)}/${t.slice(0,2)}/${e}`}b.config.baseURL="https://api.prts.wiki";const B=b,k={PIONEER:"\u5148\u950B",WARRIOR:"\u8FD1\u536B",SNIPER:"\u72D9\u51FB",SUPPORT:"\u8F85\u52A9",CASTER:"\u672F\u5E08",SPECIAL:"\u7279\u79CD",MEDIC:"\u533B\u7597",TANK:"\u91CD\u88C5"};function g(e){return e.reduce((t,l)=>t+l,0)}const s=A,r=C,m=E;function j({size:e=100,rarity:t,name:l,profession:i}){return s("div",{class:"relative",style:`width:${e}px;height:${e}px`,children:r("a",{href:`/w/${l}`,style:`width:${e}px;height:${e}px`,children:[s("img",{class:"lazyload img","data-src":`/images/${y(`\u5934\u50CF_${l}.png`)}`}),s("div",{class:"absolute bottom-0 right-0",children:s("img",{class:"lazyload img",style:`height:${e/100*18}px;`,"data-src":`/images/${y(`\u7A00\u6709\u5EA6_\u9EC4_${t}.png`)}`})}),s("div",{class:"absolute top-0",children:s("img",{class:"lazyload img",style:`height:${e/100*25}px;`,"data-src":`/images/${y(`\u56FE\u6807_\u804C\u4E1A_${k[i]}.png`)}`})})]})})}function q(){return s("div",{class:"m-0 flex-shrink-0 border-0 border-solid border-divider border-b-1px"})}function I({selected:e,label:t,onChange:l}){return r("div",{class:"max-w-360px flex-grow",onClick:l,children:[s("div",{class:`text-center py-12px px-8px hover:bg-primary-main hover:text-paper ${e?"text-primary-main":""}`,children:t}),s("div",{class:`h-2px w-full ${e?"bg-primary-main":""}`})]})}function R({labels:e,onChange:t,selected:l,classes:i}){return r(m,{children:[s("div",{class:`flex cursor-pointer ${i}`,children:e.map((n,a)=>s(I,{label:n,selected:l===a,onChange:()=>{t(a)}},n))}),s(q,{})]})}function p({classes:e}){return s("div",{class:`${e} mcui-skeleton`})}function _({rarity:e,name:t,profession:l,elite:i,skill:n,mastery:a,uniequip:o}){return r("div",{class:"flex flex-col justify-center items-center my-8px ",children:[s(j,{rarity:e,name:t,profession:l,size:60}),r("div",{class:`${i===0?"text-disabled":""}`,children:["\u7CBE\u82F1\u5316\uFF1A",s("span",{class:`${i!==0?"text-primary-main":""} font-bold`,children:i})]}),r("div",{class:`${n===0?"text-disabled":""}`,children:["\u6280\u80FD1\u21927\uFF1A",s("span",{class:`${n!==0?"text-primary-main":""}  font-bold`,children:n})]}),r("div",{class:`${g(a)===0?"text-disabled":""}`,children:["\u6280\u80FD\u4E13\u7CBE\uFF1A",s("span",{class:`${g(a)!==0?"text-primary-main":""}  font-bold`,children:g(a)===0?0:`${a.join("/")}`})]}),r("div",{class:`${o===0?"text-disabled":""}`,children:["\u6A21\u7EC4\uFF1A",s("span",{class:`${o!==0?"text-primary-main":""}  font-bold`,children:o})]})]})}async function P(e){const{data:t}=await B.get(`/widget/itemDemand/${e}`);console.log(t);const l=new Array(6),i={elite:0,skill:0,mastery:0,uniequip:0,total:0};return Object.keys(t).forEach(n=>{const a=t[n],o=l[a.rarity]||{label:`${a.rarity+1}\u661F`,data:[]};o.data.push(a),l[a.rarity]=o,i.elite+=a.elite,i.uniequip+=a.uniequip,n!=="char_1001_amiya2"&&(i.skill+=a.skill),i.mastery+=a.mastery.reduce((h,c)=>h+c,0)}),i.total=i.elite+i.skill+i.mastery+i.uniequip,console.log(i),{costs:l.filter(n=>n).reverse(),total:i}}var F;(function(e){e[e.req=0]="req",e[e.fail=1]="fail",e[e.succ=2]="succ"})(F||(F={}));function T({item:e}){const[t,l]=x(),[i,n]=x(0),a=async()=>{try{n(0);const c=await P(e);console.log(c),l(c),n(2)}catch(c){console.log(c),n(1)}};w(()=>{a()},[]);const[o,h]=x(0);return s(m,{children:s("div",{class:"max-w-700px box-border",children:i==1?s("div",{class:"py-12px px-8px border-primary-main border-1px border-solid w-140px rounded",onClick:()=>{a()},children:"\u52A0\u8F7D\u5931\u8D25 \u70B9\u51FB\u91CD\u8BD5"}):i==2&&t?r(m,{children:[r("div",{children:[r("div",{children:["\u7CBE\u82F1\u5316\uFF1A",t.total.elite]}),r("div",{children:["\u6280\u80FD1\u21927\uFF1A",t.total.skill]}),r("div",{children:["\u6280\u80FD\u4E13\u7CBE\uFF1A",t.total.mastery]}),r("div",{children:["\u6A21\u7EC4\uFF1A",t.total.uniequip]}),r("div",{class:"font-bold",children:["\u603B\u8BA1\uFF1A",t.total.total]})]}),s(R,{classes:"sticky top-0 bg-paper z-10 bg-table mt-12px",labels:t.costs.map(c=>c.label),onChange:c=>{h(c)},selected:o}),s("div",{class:"mt-12px",children:t.costs.map((c,f)=>s("div",{class:`grid grid-cols-5 <sm:grid-cols-3 ${o==f?"":"hidden"}`,children:c.data.map(d=>s(_,{rarity:d.rarity,name:d.name,profession:d.profession,elite:d.elite,skill:d.skill,mastery:d.mastery,uniequip:d.uniequip},d.name))},f))})]}):r(m,{children:[s(p,{classes:"w-120px h-30px my-8px"}),s(p,{classes:"w-120px h-30px my-8px"}),s(p,{classes:"w-120px h-30px my-8px"}),s(p,{classes:"w-120px h-30px my-8px"}),s(p,{classes:"w-full h-200px"})]})})})}const u=document.getElementById("root");var $;(($=u==null?void 0:u.dataset)==null?void 0:$.item)?D(s(T,{item:u.dataset.item}),u):console.error("data-item or ele not found",u);
//# sourceMappingURL=main.5708f712.js.map